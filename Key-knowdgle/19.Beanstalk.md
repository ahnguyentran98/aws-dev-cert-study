# AWS Elastic Beanstalk Summary

## **Core Concepts**

**What is Elastic Beanstalk?**
- Developer-centric AWS service for deploying applications
- Uses familiar AWS components: EC2, Auto Scaling Groups, ELB, RDS
- Managed service handling capacity provisioning, load balancing, scaling, health monitoring
- Free service - you only pay for underlying AWS resources

## **Key Components**

**Application Structure**
- **Application**: Collection of Elastic Beanstalk components (environments, versions, configurations)
- **Application Version**: Iteration of your application code
- **Environment**: Collection of AWS resources running single application version
- **Tiers**: Web Server Environment Tier & Worker Environment Tier

## **Supported Platforms**

**Programming Languages & Frameworks**
- Go, Java SE, Java with Tomcat
- .NET Core on Linux, .NET on Windows Server
- Node.js, PHP, Python, Ruby
- Packer Builder
- Docker: Single Container, Multi-container, Preconfigured

## **Environment Tiers**

**Web Server Tier**
- Handles HTTP requests from users
- Uses Application Load Balancer
- Auto Scaling Group with EC2 instances
- Suitable for web applications and APIs

**Worker Tier**
- Processes background tasks from SQS queue
- Scales based on SQS message count
- No load balancer - pulls messages directly
- Ideal for batch processing and background jobs

## **Deployment Modes**

**Single Instance**
- Single EC2 instance with Elastic IP
- Great for development environments
- No load balancer or auto scaling

**High Availability with Load Balancer**
- Multiple EC2 instances across AZs
- Application Load Balancer
- Auto Scaling Group
- RDS with Multi-AZ for production

## **Deployment Strategies**

**All at Once**
- Fastest deployment method
- Application downtime during deployment
- No additional cost
- Best for development environments

**Rolling**
- Updates instances in batches
- Application runs below capacity during deployment
- No additional cost but longer deployment time
- Configurable bucket size

**Rolling with Additional Batches**
- Maintains full capacity during deployment
- Spins up new instances temporarily
- Small additional cost
- Good for production environments

**Immutable**
- Zero downtime deployment
- Creates temporary Auto Scaling Group
- Highest cost (double capacity)
- Quick rollback capability
- Best for critical production environments

**Blue/Green**
- Not direct Beanstalk feature
- Create new environment and swap URLs
- Zero downtime with Route 53 traffic routing
- Independent validation before switching

**Traffic Splitting (Canary Testing)**
- Deploys to temporary ASG with same capacity
- Routes small percentage of traffic to new version
- Automated rollback on deployment failure
- Monitors deployment health

## **Configuration & Extensions**

**Elastic Beanstalk Extensions (.ebextensions)**
- Configuration files in `.ebextensions/` directory
- YAML/JSON format with `.config` extension
- Modify default settings using `option_settings`
- Add AWS resources (RDS, ElastiCache, DynamoDB)
- Resources deleted when environment terminates

**Deployment Process**
- Package code as ZIP with dependency files
- Python: `requirements.txt`, Node.js: `package.json`
- Deploy via Console (upload) or CLI
- Beanstalk resolves dependencies and starts application

## **Application Lifecycle Management**

**Version Management**
- Maximum 1000 application versions stored
- Lifecycle policy to manage old versions
- Based on time or space constraints
- Currently used versions protected from deletion
- Option to retain source bundle in S3

**Environment Cloning**
- Clone environment with exact same configuration
- Preserves load balancer, RDS type, environment variables
- RDS data not preserved (only configuration)
- Useful for creating test environments

## **Database Integration**

**RDS with Beanstalk**
- **Development/Test**: Provision RDS with Beanstalk
- **Production**: Create separate RDS instance
- Database lifecycle tied to environment in integrated approach

**RDS Migration Process**
1. Create RDS snapshot as safeguard
2. Protect RDS from deletion in console
3. Create new environment pointing to existing RDS
4. Perform CNAME swap or Route 53 update
5. Terminate old environment (RDS preserved)
6. Clean up CloudFormation stack

## **Load Balancer Migration**

**Migration Process**
- Cannot change load balancer type after creation
- Must create new environment with different LB type
- Cannot use cloning for LB type change
- Deploy application to new environment
- Perform CNAME swap or Route 53 update

## **CLI & Automation**

**EB CLI Commands**
- `eb create`, `eb deploy`, `eb status`
- `eb health`, `eb events`, `eb logs`
- `eb open`, `eb config`, `eb terminate`
- Helpful for automated deployment pipelines

## **Underlying Infrastructure**

**CloudFormation Integration**
- Beanstalk uses CloudFormation under the hood
- Can define CloudFormation resources in `.ebextensions`
- Provision additional AWS services (S3, ElastiCache)
- Infrastructure as Code approach

## **Best Practices**

**Environment Strategy**
- Separate environments for dev, test, prod
- Use appropriate deployment method per environment
- Decouple RDS for production workloads
- Implement proper lifecycle policies for versions

**Cost Optimization**
- Use single instance for development
- Implement automated start/stop for dev environments
- Monitor costs through CloudFormation stack tagging
- Clean up unused application versions regularly