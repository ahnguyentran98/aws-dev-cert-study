

## **VPC Overview for AWS Developer Associate**

### **Scope for Developer Level:**
- **Less than 1-2 questions** on the exam
- **Overview level** understanding required
- VPC knowledge **more critical** for Solutions Architect Associate & SysOps Administrator

### **Key Topics to Know:**
- VPC, Subnets, Internet Gateways & NAT Gateways
- Security Groups, Network ACL (NACL), VPC Flow Logs
- VPC Peering, VPC Endpoints
- Site to Site VPN & Direct Connect

## **Core VPC Concepts**

### **VPC (Virtual Private Cloud)**
- **Private network** to deploy your resources
- **Regional resource** - spans multiple Availability Zones
- **CIDR Range:** Defines IP address space (e.g., 10.0.0.0/16)

### **Subnets**
- **Partition your network inside VPC**
- **Availability Zone resource** - tied to specific AZ
- **Two types:**
  - **Public Subnet:** Accessible from the internet
  - **Private Subnet:** Not accessible from the internet

### **Route Tables**
- **Define access** to the internet and between subnets
- **Control traffic flow** within VPC architecture

## **VPC Architecture Example**

**Typical Multi-AZ VPC Setup:**
```
VPC (10.0.0.0/16)
├── Availability Zone 1
│   ├── Public Subnet
│   └── Private Subnet
└── Availability Zone 2
    ├── Public Subnet
    └── Private Subnet
```

## **Internet Connectivity**

### **Internet Gateway (IGW)**
- **Helps VPC instances connect with the internet**
- **Attached at VPC level**
- **Public subnets have route to Internet Gateway**
- **Provides Internet Access** for resources in public subnets

### **NAT Gateways & NAT Instances**
**Purpose:** Allow private subnet instances to access internet while remaining private

**NAT Gateway:**
- **AWS-managed** solution
- **Higher availability and bandwidth**
- **Placed in public subnet**

**NAT Instance:**
- **Self-managed** EC2 instance
- **More control but requires management**

## **Network Security**

### **Security Groups**
**Characteristics:**
- **Firewall** that controls traffic to/from **ENI/EC2 Instance**
- **Stateful** - return traffic automatically allowed
- **Instance level** security
- **Can have only ALLOW rules**
- **Rules include IP addresses and other security groups**

**Key Features:**
- Can be attached to **multiple instances**
- **Locked to region/VPC combination**
- Lives **"outside" the EC2** instance
- **All inbound traffic blocked by default**
- **All outbound traffic authorized by default**

### **Network ACLs (NACL)**
**Characteristics:**
- **Firewall** that controls traffic from/to **subnet**
- **Stateless** - must explicitly allow return traffic
- **Subnet level** security
- **Can have ALLOW and DENY rules**
- **Rules only include IP addresses**

### **Security Groups vs NACLs Comparison**

| Feature | Security Groups | Network ACLs |
|---------|----------------|--------------|
| **Level** | Instance/ENI level | Subnet level |
| **State** | Stateful | Stateless |
| **Rules** | Allow only | Allow & Deny |
| **Rule Types** | IP addresses + Security Groups | IP addresses only |
| **Default** | All inbound blocked, all outbound allowed | Custom rules |

## **VPC Advanced Features**

### **VPC Flow Logs**
**Purpose:** Capture information about IP traffic going into interfaces

**Types:**
- **VPC Flow Logs** - entire VPC traffic
- **Subnet Flow Logs** - specific subnet traffic  
- **Elastic Network Interface Flow Logs** - specific ENI traffic

**Use Cases:**
- **Monitor & troubleshoot connectivity issues**
- **Security analysis**
- **Network optimization**

**Captured Information:**
- Subnets to internet traffic
- Subnets to subnets traffic
- Internet to subnets traffic
- **AWS managed interfaces:** ELB, ElastiCache, RDS, Aurora, etc.

**Destination Options:**
- **Amazon S3**
- **CloudWatch Logs**
- **Kinesis Data Firehose**

### **VPC Peering**
**Purpose:** Connect two VPCs privately using AWS network

**Key Characteristics:**
- **Make VPCs behave as if they were in same network**
- **Must not have overlapping CIDR** (IP address ranges)
- **Not transitive** - must establish peering for each VPC pair
- **Works across regions and accounts**

**Example Architecture:**
```
VPC A ←→ VPC B
  ↑       ↓
  ←→ VPC C ←→
```
**Note:** VPC A cannot reach VPC C through VPC B - requires direct peering

### **VPC Endpoints**
**Purpose:** Connect to AWS Services using **private network** instead of public internet

**Benefits:**
- **Enhanced security**
- **Lower latency**
- **Only used within your VPC**

**Types:**

**1. VPC Endpoint Gateway:**
- **S3 & DynamoDB only**
- **Gateway-based connection**

**2. VPC Endpoint Interface (ENI):**
- **All other AWS services**
- **Elastic Network Interface in your subnet**
- **Examples:** CloudWatch, EC2, Lambda, etc.

## **Hybrid Connectivity**

### **Site-to-Site VPN**
**Characteristics:**
- **Connect on-premises VPN to AWS**
- **Connection automatically encrypted**
- **Goes over public internet**
- **Quick to set up**

### **AWS Direct Connect (DX)**
**Characteristics:**
- **Physical connection** between on-premises and AWS
- **Private, secure, and fast**
- **Goes over private network**
- **Takes at least a month to establish**
- **Higher bandwidth and lower latency**

**Comparison:**
| Feature | Site-to-Site VPN | Direct Connect |
|---------|------------------|----------------|
| **Connection** | Over public internet | Private dedicated line |
| **Security** | Encrypted | Private |
| **Setup Time** | Quick | 1+ month |
| **Bandwidth** | Variable | High and consistent |
| **Cost** | Lower | Higher |

## **VPC Summary - Key Components**

### **Essential Components:**
- **VPC:** Virtual Private Cloud (regional)
- **Subnets:** Network partitions tied to AZ
- **Internet Gateway:** VPC-level internet access
- **NAT Gateway/Instances:** Private subnet internet access
- **NACL:** Stateless subnet-level rules
- **Security Groups:** Stateful instance-level rules

### **Advanced Features:**
- **VPC Peering:** Connect VPCs with non-overlapping IP ranges (non-transitive)
- **VPC Endpoints:** Private access to AWS Services within VPC
- **VPC Flow Logs:** Network traffic monitoring
- **Site-to-Site VPN:** VPN over public internet to on-premises
- **Direct Connect:** Direct private connection to AWS

## **Developer-Specific Considerations**

### **Common Use Cases:**
- **Lambda in VPC:** Access RDS, ElastiCache in private subnets
- **Application Load Balancer:** Public subnet with backends in private subnets
- **Database Security:** RDS in private subnets with Security Group restrictions
- **API Gateway VPC Integration:** Private API endpoints

### **Security Best Practices:**
- **Principle of least privilege** in Security Groups
- **Use private subnets** for databases and internal services
- **VPC Endpoints** for AWS service access without internet routing
- **Network ACLs** for additional subnet-level security
- **VPC Flow Logs** for security monitoring

### **Important Notes:**
- **Don't stress** if you don't understand everything initially
- **VPC concepts will be highlighted** throughout the course when relevant
- **Practical application** will solidify understanding
- **Focus on Security Groups and basic connectivity** for Developer Associate level